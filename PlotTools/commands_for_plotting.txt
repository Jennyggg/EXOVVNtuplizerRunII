To reweight the MC to data on instantaneous luminosity, run
root -l add_PUWeight.cpp'("MC_FILE","DATA_FILE","OUTPUT_PUWEIGHT")'

An example:
root -l add_PUWeight.cpp'("/pnfs/psi.ch/cms/trivcat/store/user/jinw/DY1JetsToLL/CRAB/DY1JetsToLL_M-50_TuneCP5_13TeV-madgraphMLM-pythia8/DY1JetsToLL_M-50_TuneCP5_13TeV-madgraphMLM-pythia8_RunIIAutumn18MiniAOD-102X_upgrade2018_realistic_v15-v2/210520_001515/0000/flatTuple_compare.root", "/pnfs/psi.ch/cms/trivcat/store/user/jinw/ZeroBias2018/run316187/flatTuple_run316187_v4.root","MCWeight_run316187.root")'

To do the data-MC comparison after reweighting, run
root -b -l plot_ndisplace_data_MC.cpp'("MC_FILE","DATA_FILE","PUWEIGHT_FILE","PLOT_NAME","LEGEND_NAME_MC","LEGEND_NAME_DATA","MASS_REGION",PUREWEIGHT,IS_LOG,SIGNIFICANCE_PLOT)'
to plot the distributions of the number of displaced tracks
or
root -b -l plot_sph_data_MC.cpp'("MC_FILE","DATA_FILE","PUWEIGHT_FILE","PLOT_NAME","LEGEND_NAME_MC","LEGEND_NAME_DATA","MASS_REGION",PUREWEIGHT,IS_LOG,SIGNIFICANCE_PLOT)'
to plot the distributions of spherocity.

Options for "MASS_REGION":
"verylow": C.O.M mass of tracks 20-40 GeV
"low": C.O.M mass of tracks 40-80 GeV
"medium": C.O.M mass of tracks 80-200 GeV
"high": C.O.M mass of tracks 200-300 GeV
"veryhigh": C.O.M mass of tracks 300-500 GeV
"inclu": inclusive C.O.M mass of tracks

PUREWEIGHT is a bool value to decide whether to apply the reweighting. IS_LOG is a bool value to decide whether to plot in log scale. SIGNIFICANCE_PLOT is a bool value to decide whether to plot the significance of the different in the lower pad. If SIGNIFICANCE_PLOT=false, it will plot the ratio DATA/MC in the lower pad.

An example:
root -b -l plot_ndisplace_data_MC.cpp'("/pnfs/psi.ch/cms/trivcat/store/user/jinw/DY1JetsToLL/CRAB/DY1JetsToLL_M-50_TuneCP5_13TeV-madgraphMLM-pythia8/DY1JetsToLL_M-50_TuneCP5_13TeV-madgraphMLM-pythia8_RunIIAutumn18MiniAOD-102X_upgrade2018_realistic_v15-v2/210520_001515/0000/flatTuple_compare.root", "/pnfs/psi.ch/cms/trivcat/store/user/jinw/ZeroBias2018/run316187/flatTuple_run316187_v4.root","MCWeight_run316187.root","ZeroBias_DYMC_ratio","DY1JetsToLLPileup","ZeroBias","veryhigh",true,true,false)'



